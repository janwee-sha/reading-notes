# 2.1.2 问题空间和解空间

Allen Newell和Herbert Simon的**问题空间**理论：“人类是通过在问题空间（problem space）中寻找解决方案来解决问题的”。

构建软件也就是从真实世界的问题空间中寻找解决方案，将其映射为理念世界的**解空间**。

从问题空间到解空间：

问题空间（真实世界）——软件构建——>解空间（理念世界）

# 2.3.1 控制规模

**限界上下文**和**上下文映射**是DDD中控制系统规模的手段。

# 2.3.2 清晰结构

通过**分层结构**将领域分离出来，在业务逻辑和技术实现之间划定明确一条的边界。

业务逻辑封装到**领域层**，支撑业务逻辑的技术实现放到**基础设施层**，领域层之上的**应用层**一方面作为业务逻辑的外观，暴露能够体现业务用例的应用服务接口，另一方面又是业务逻辑与技术实现的黏合剂。

# 4.2.2 统一语言

形成统一的领域术语，尤其是基于模型的语言概念，是让沟通达成一致的前提。

# 6.2.2 业务服务

**业务服务**是角色主动向目标系统发起服务请求完成的一次完整的功能交互，体现了服务价值的业务行为。

业务服务的**角色**通常包括**用户**、**策略**或**伴生系统**。

例如：

**文学平台的业务服务**

- **驻站作者申请业务服务**：

申请人->提交驻站作者申请

审批人->审批驻站作者申请

- **作品创作业务服务**：

驻站作者->创作作品、预览作品、发布作品、调整收费模式

编辑->添加作品建议

# 6.3.1 子领域模型

1.子领域的共识

- 子领域属于问题空间的范畴；

- 子领域用于分辨问题问题空间的核心问题还是次要问题。

**核心子领域**是目标系统最为核心的业务资产，体现了目标系统的核心价值。

**通用子领域**包含的内容缺乏领域个性，如各行各业的领域都需要授权认证、企业组织等业务。

**支撑子领域**包含的内容为核心子领域提供了支撑，如物流系统的路径规划业务需要用到地图服务。

# 7.1.2 架构方案的推演

当变化不可避免时，一种行之有效的方法是**共同顺应变化的方向**，借此降低变化带来的影响。在领域驱动设计中，**限界上下文**作为一种软件元素**将业务架构与应用架构绑定起来**。

# 8.2 系统上下文

**系统上下文**代表了目标系统的解空间。

# 9.1 限界上下文的定义

**上下文**其实是动态的业务流程被边界静态切分的产物。

**封装了领域知识的领域对象组成了领域模型，在知识语境的界定下，不同的领域对象扮演不同的角色，执行不同的业务活动，并与限界上下文内的其他非领域模型对象一起，对外提供完整的业务能力。**

限界上下文之间的复用体现为对业务能力的复用，而非对知识语境边界内领域模型的复用。

# 9.2 限界上下文的特征

在识别限界上下文时，必须考虑它的业务特征：

- 它是领域模型的知识语境；
- 它是业务能力的纵向切分。

在设计限界上下文时，必须考虑它的设计特征：

- 它是自治的架构单元。

# 10.2.1 防腐层

防腐层往往位于下游，通过它隔离上游限界上下文可能发生的变化。

防腐层仅仅起到“隔离”的作用，**防腐层从未提供真正的业务实现**，业务实现被放到了另一个限界上下文中，防腐层会向它发起调用。

# 10.2.2 开放主机服务

设计开放主机服务，就是定义公共服务的协议，包括通信的方式、传递消息的格式（协议）。

# 10.2.3 发布语言

**发布语言**是一种公共语言，用于两个限界上下文之间的模型转换。防腐层和开放主机服务都是访问领域模型时建立的一层包装。

防腐层和开放主机服务操作的对象都不应该时各自的领域模型。