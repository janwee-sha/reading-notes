# SQL HAVING子句

在SQL中增加HAVING子句的原因是，WHERE子句关键字无法与聚合函数一起使用，HAVING子句可以让我们筛选分组后的各组数据。

**SQL HAVING 语法**

```
SELECT col_name, aggregate_function(col_name)
FROM tbl_name
WHERE col_name operator value
GROUP BY col_name
HAVING aggregate_function(col_name) operator value;
```

# MySQL 字符串函数

- **ASCII(s)**，返回字符串s的第一个字符的ASCII码。
```
SELECT ASCII('Hello');
-- 72
```

- **CHAR_LENGTH(s)**、**CHARACTER_LENGTH(s)**、**LENGTH(s)**，返回字符串s的字符数。
```
SELECT CHAR_LENGTH('Hello');
-- 5
```

- **CONCAT(s1,s2...)**，合并字符串列表(s1,s2...)。
```
SELECT CONCAT('hello',' ','world');
-- hello world
```

- **CONCAT_WS(x,s1,s2...)**， 以x为分隔符合并字符串列表(s1,s2...)
```
SELECT CONCAT_WS(' ','hello','world');
-- hello world
```

- **FIELD(s,s1,s2...)**， 返回第一个字符串s在字符串列表(s1,s2...)中的位置。
```
SELECT FIELD('c','a','b','c','d');
-- 3
```

- **FIND_IN_SET(s1,s2)**， 返回字符串s2中与s1匹配的字符串的位置。
```
SELECT FIND_IN_SET('c','a,b,c,d,e');
-- 3
```

- **FORMAT(x,n)**，将数字x进行格式化，并保留到小数点后n位 。
```
SELECT FORMAT(PI()*10000,2);
-- 31,415.93
```

- **INSERT(s1,x,len,s2)**， 字符串s2替换s1的x位置开始长度为len的字符串。

- **LOCATE(s1,s2)**，从字符串s2中获取s1的开始位置。
```
SELECT LOCATE('christmas','merry christmas');
-- 7
```

- **LCASE(s)**、**LOWER(s)**，小写转换字符串s中的所有字母。 

- **LEFT(s,n)**，返回字符串s的前n个字符。

- **LPAD(s1,len,s2)**，在字符串s1的开始处填充字符串s2，使字符串长度达到len。
```
SELECT LPAD(' world',11,'hello');
-- hello world
```

- **LTRIM(s)**，去掉字符串s开始处的空格。 

-**MID(s,start,len)**、**SUBSTR(s,start,len)**、**SUBSTRING(s,start,len)**，截取子字符串。





# MySQL 日期函数

- **ADDDATE(d,INTERVAL expr type)**、**DATE_ADD(d,INTERVAL expr type)**，计算时间表达式d加上区间表达式后的时间。


```
SELECT ADDDATE('2022-02-22 22:22:22',INTERVAL 1 SECOND);
-- 2022-02-22 22:22:23
```

- **ADDTIME(t,n)**，计算时间表达式t加上时间表达式n后的时间。


```
SELECT ADDTIME('2022-02-22 22:22:22',1);
-- 2022-02-22 22:22:23
```

- **CURDATE()**、**CURRENT_DATE()**，返回当前日期。

- **CURRENT_TIME()**、**CURTIME()**，返回当前时间。

- **CURRENT_TIMESTAMP()**，返回当前日期和时间。

- **DATE()**，从日期或日期时间表达式中提起日期值。

- **DATEDIFF(d1，d2)**，计算日期d1->d2之间相隔的天数。
```
SELECT DATEDIFF('2022-1-8 22:15:00','2022-1-9');
-- -1
```


